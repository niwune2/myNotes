# Bash練習問題(2025年8月23日)

いいですね！それなら「Bashでファイル名処理を修める課題集」を作りましょう。
だんだん難しくなるように並べておきます。

- [Bash練習問題(2025年8月23日)](#bash練習問題2025年8月23日)
  - [Bashファイル名練習課題](#bashファイル名練習課題)
    - [初級（ウォーミングアップ）](#初級ウォーミングアップ)
      - [1](#1)
        - [回答1-1](#回答1-1)
      - [2](#2)
        - [回答2-1](#回答2-1)
      - [3](#3)
        - [回答3-1](#回答3-1)
    - [中級（本格処理）](#中級本格処理)
      - [4](#4)
      - [5](#5)
      - [6](#6)
    - [上級（実務っぽい）](#上級実務っぽい)
      - [7](#7)
      - [8](#8)
      - [9](#9)
      - [10](#10)
    - [挑戦（頭の体操）](#挑戦頭の体操)
      - [11](#11)
      - [12](#12)
      - [13](#13)
      - [14](#14)
  - [メモ](#メモ)
    - [ファイルの一括移動](#ファイルの一括移動)
    - [ターミナルで改行する](#ターミナルで改行する)
  - [置換の書式](#置換の書式)

---

## Bashファイル名練習課題

### 初級（ウォーミングアップ）

#### 1

カレントディレクトリに `test1.txt test2.txt test3.txt` を作成し、それらのファイル名を1行ずつ表示するループを書いてください。

##### 回答1-1

```bash
#!/bin/bash

touch text_{1..3}.txt

for i in *.txt; do
    echo "$i"
done
```

#### 2

`*.txt` の拡張子を `.log` にすべて変えるスクリプトを書いてください。

##### 回答2-1

```bash
#!/bin/bash

for i in *.txt; do
    mv "$i" "${i%.txt}.log"
done
```

1. `${i%.txt}`は、`%`より後ろの文字列を削ることができる
   1. `${var%pattern}`はパラメータ展開の一つ
2. `*`はワイルドカード展開の一つ

#### 3

`data_001.txt data_002.txt` を `report_001.txt report_002.txt` に一括で変えてください。

##### 回答3-1

```bash
rm -f data_*.txt
touch data_{001..002}.txt


for i in data_*.txt; do
    mv "$i" "report_${i#*_}"
done
```

---

### 中級（本格処理）

#### 4

`img1.jpeg img2.jpeg …` を全部 `jpg` に変換してください。

#### 5

ファイル名に「error」が含まれているファイルだけを `errors/` フォルダに移動してください。

#### 6

`.txt` ファイルを `backup/` フォルダにコピーし、元のファイルはそのまま残してください。

---

### 上級（実務っぽい）

#### 7

100個のファイルを作って、`file001.txt … file100.txt` にリネームしてください。

#### 8

サイズが0バイトのファイルだけ削除するスクリプトを書いてください。

#### 9

`.csv` ファイルをすべて調べて、名前の先頭に「checked\_」をつけてリネームしてください。

#### 10

拡張子がバラバラなファイル（.txt, .log, .md）を全部まとめて「.bak」を付けてリネームしてください（例：`note.txt → note.txt.bak`）

---

### 挑戦（頭の体操）

#### 11

フォルダ内のすべてのファイルに、更新日時（例：`20250822`）を末尾に付けるスクリプトを書いてください。

#### 12

サブフォルダを含めて `.png` ファイルをすべて探し、`images/` フォルダにコピーしてください。

#### 13

ファイル名に半角スペースが含まれているものだけを「\_」（アンダースコア）に置換してください。

#### 14

1,000個のファイルを10個ごとのフォルダに分けて振り分けるスクリプトを書いてください。

## メモ

### ファイルの一括移動

`mv text_{1..3}.txt image_{1..3}.jpg data_{001..005}.txt text_{1...3}.txt No_1/.`

移動先のディレクトリに`/.`を付ける

### ターミナルで改行する

`\`を付けると改行して入力できる

## 置換の書式

1. `${変数%マッチパターン}`
   1. 後方からの検索の一致で一番初めにマッチした部分を削除
2. `${変数%%マッチパターン}`
   1. 後方からの検索の一致で一番後ろまでマッチした部分までを削除
3. `${変数#マッチパターン}`
   1. 前方からの検索の一致で一番初めにマッチした部分を削除
4. `${変数##マッチパターン}`
   1. 前方からの検索の一致で一番後ろまでマッチした部分までを削除
5. `${変数/文字列/処理後文字列}`
   1. 最初にマッチしたもののみ文字列を置換
6. `${変数//文字列/処理後文字列}`
   1. 全ての文字列を置換
