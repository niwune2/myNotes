# パラメータ展開_置換・抽出

- [パラメータ展開\_置換・抽出](#パラメータ展開_置換抽出)
  - [Bash パラメータ展開ドリル（置換・抽出編）](#bash-パラメータ展開ドリル置換抽出編)
    - [基本（部分置換）](#基本部分置換)
      - [`f="data_001.txt"`](#fdata_001txt)
        - [回答1-1](#回答1-1)
      - [A:`f="data_data_001.txt"`](#afdata_data_001txt)
        - [回答1-2](#回答1-2)
    - [応用（全部置換）](#応用全部置換)
      - [B:`f="data_data_001.txt"`](#bfdata_data_001txt)
        - [回答2-1](#回答2-1)
      - [`f="image 01.jpeg"`](#fimage-01jpeg)
        - [回答2-2](#回答2-2)
    - [拡張子の変換](#拡張子の変換)
      - [`f="report_001.txt"`](#freport_001txt)
        - [回答3-1](#回答3-1)
    - [部分抽出との組み合わせ](#部分抽出との組み合わせ)
      - [A:`f="report_2025_09_01.log"`](#afreport_2025_09_01log)
        - [回答3-2](#回答3-2)
      - [B:`f="report_2025_09_01.log"`](#bfreport_2025_09_01log)
        - [回答3-3](#回答3-3)
    - [応用パターン](#応用パターン)
      - [`f="backup.old.tar.gz"`](#fbackupoldtargz)
        - [回答4-1](#回答4-1)
      - [`f="user.name.data.csv"`](#fusernamedatacsv)
        - [回答4-2](#回答4-2)
      - [`f="2025-09-01_report.txt"`](#f2025-09-01_reporttxt)
        - [回答4-3](#回答4-3)

よし、ではいよいよ「置換編」に進みましょう！
ルールどおり、段落は `##` と `###`、箇条書きは `-` を使って整理しました。

---

## Bash パラメータ展開ドリル（置換・抽出編）

### 基本（部分置換）

#### `f="data_001.txt"`

`${f/data/report}` を使って、`data` を `report` に置換せよ。

##### 回答1-1

```bash
#!/bin/bash

f="data_001.txt"
echo "${f/data/report}"
# ${変数/置換えたい文字列/置き換える文字列}
```

#### A:`f="data_data_001.txt"`

`${f/data/report}` を使って、最初の `data` だけを `report` に置換せよ。

##### 回答1-2

```bash
#!/bin/bash

f="data_data_001.txt"
echo "${f/data/report}"
# "${f/data/report}"はスラッシュ(/)一つ。
# 前から最初にヒットしたものを置き換える
```

### 応用（全部置換）

#### B:`f="data_data_001.txt"`

`${f//data/report}` を使って、すべての `data` を `report` に置換せよ。

##### 回答2-1

```bash
#!/bin/bash

f="data_001.txt"
echo "${f//data/report}"
# スラッシュ２つで変数中の文字列すべてを置き換える
```

#### `f="image 01.jpeg"`

`${f// /_}` を使って、スペースを `_` に置換せよ。

##### 回答2-2

```bash
#!/bin/bash

f="image 01.jpeg"
echo "${f// /_}"
# スペースを置き換えるにはそのままスペースを入れる
```

### 拡張子の変換

#### `f="report_001.txt"`

`${f%.txt}.log` を使って、拡張子を `.txt` から `.log` に置換せよ。

##### 回答3-1

```bash
#!/bin/bash

f="report_001.txt"
echo "${f%.txt}.log"
# `%`は後ろから最初にヒットしたものを削る
# 中括弧の外から置き換える文字列を付与する
```

### 部分抽出との組み合わせ

#### A:`f="report_2025_09_01.log"`

`${f%.log}` を使って拡張子を削り、残ったファイル名を出力せよ。

##### 回答3-2

```bash
#!/bin/bash

f="report_2025_09_01.log"
echo "${f%.log}"
# `%`で文字列の後ろの`.log`をそのまま削る
```

#### B:`f="report_2025_09_01.log"`

`${f#report_}` を使って、日付部分だけを取り出せ。

##### 回答3-3

```bash
#!bin/bash

f="report_2025_09_01.log"
g="${f#report_}"
# reportを分離して別の変数にいれる
echo "${g%.log}"
```

### 応用パターン

#### `f="backup.old.tar.gz"`

`${f/.old/}` を使って、`.old` を取り除け。

##### 回答4-1

```bash
#!/bin/bash

f="backup.old.tar.gz"
echo "${f/.old/}"
# 単純に`.old`を削る。
# 文字列中の真ん中にあるものを削りたいとき使えそう
```

#### `f="user.name.data.csv"`

`${f//./_}` を使って、すべての `.` を `_` に置換せよ。

##### 回答4-2

```bash
#!/bin/bash
f="user.name.data.csv"
echo "${f//./_}"
```

#### `f="2025-09-01_report.txt"`

`${f%%_*}` を使って、日付部分（2025-09-01）だけを取り出せ。

##### 回答4-3

```bash
#!/bin/bash

f="2025-09-01_report.txt"
echo "${f%%_*}"
# `%%_*`で文字列の後ろから最後にマッチした`_`以降を全部削る
# `%*`は後ろから最初の`_`まで
# `%%*`は後ろから最後の`_`まで
```

---

これで合計10問です。
今日から取り組むなら「基本（部分置換）」の1問目から行きましょうか？
