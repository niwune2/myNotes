# `#`と`%`の使い分け練習問題

- [`#`と`%`の使い分け練習問題](#との使い分け練習問題)
  - [# と ## の違い（先頭側）](#-と--の違い先頭側)
  - [% と %% の違い（末尾側）](#-と--の違い末尾側)
  - [具体例で比較](#具体例で比較)
  - [Bash パラメータ展開ドリル（# / % 編）](#bash-パラメータ展開ドリル---編)
    - [基本（前後どっちか削る）](#基本前後どっちか削る)
      - [`f="data_001.txt"`](#fdata_001txt)
    - [最短 vs 最大マッチ（# と ##）](#最短-vs-最大マッチ-と-)
      - [`f="data_file_001.txt"`（末尾側）](#fdata_file_001txt末尾側)
    - [最短 vs 最大マッチ（% と %%）](#最短-vs-最大マッチ-と--1)
      - [`f="data_file_001.txt"`](#fdata_file_001txt)
    - [複数ドットで違いを見る](#複数ドットで違いを見る)
      - [`f="archive.tar.gz"`](#farchivetargz)
  - [ワンポイント覚え方](#ワンポイント覚え方)

さて、ご質問の **「最大マッチ」** について整理しましょう。

---

## # と ## の違い（先頭側）

- `${var#pattern}` → **最短一致**（最初に見つかった部分だけ削る）
- `${var##pattern}` → **最長一致**（できるだけ長くマッチした部分を削る）

---

## % と %% の違い（末尾側）

- `${var%pattern}` → **最短一致**（末尾から最初に当たった部分だけ削る）
- `${var%%pattern}` → **最長一致**（できるだけ長くマッチした部分を削る）

---

## 具体例で比較

```bash
f="backup.tar.gz"

echo "${f%.*}"   # → backup.tar   （末尾の .gz だけ削除）
echo "${f%%.*}"  # → backup       （最初のドット以降ぜんぶ削除）

echo "${f#*.}"   # → tar.gz       （最初のドットまで削除）
echo "${f##*.}"  # → gz           （最後のドットまで削除）
```

- `%` と `%%` は「後ろ側」でどこまで削るか
- `#` と `##` は「前側」でどこまで削るか
- **1個は最短、2個は最大** と覚えるとOKです。

---

Ayさんの第3問の式 `${f##*.}` は「先頭から最後のドットまで削る」＝「拡張子だけ取り出す」という動きでした。

---

了解です！ここは一番つまずきやすいポイントなので、**「# と % の違い」専用のドリル10問**を用意しますね。
全部「f=...」を前提にしています。

---

## Bash パラメータ展開ドリル（# / % 編）

### 基本（前後どっちか削る）

#### `f="data_001.txt"`

1. 先頭の `data_` を削って残りを出力せよ。
2. 末尾の `.txt` を削って残りを出力せよ。

---

### 最短 vs 最大マッチ（# と ##）

#### `f="data_file_001.txt"`（末尾側）

- `#*_` を使って、最初の `_` まで削った結果を出力せよ。
- `##*_` を使って、最後の `_` まで削った結果を出力せよ。

---

### 最短 vs 最大マッチ（% と %%）

#### `f="data_file_001.txt"`

- `%_*` を使って、末尾から最初に見つかった `_` 以降を削って出力せよ。
- `%%_*` を使って、末尾から最後に見つかった `_` 以降を全部削って出力せよ。

---

### 複数ドットで違いを見る

#### `f="archive.tar.gz"`

- `%.*` を使って、末尾の `.gz` だけ削れ。
- `%%.*` を使って、最初のドット以降を全部削れ。
- `#*.` を使って、最初のドットまで削れ。
- `##*.` を使って、最後のドットまで削れ。

---

## ワンポイント覚え方

- `#` 系 → 先頭から削る
- `%` 系 → 末尾から削る
- 1個（#, %） → 最短一致（最初に見つかったところまで）
- 2個（##, %%） → 最大一致（できるだけ長く削る）

---

まずは 3問目と4問目（`data_file_001.txt` で # と ## の違いを試す）に挑戦してみませんか？
